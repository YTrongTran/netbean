/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Monhoc;

import java.awt.Color;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Administrator
 */
public class Frcstudentdem extends javax.swing.JFrame {

    MonhocDAO mhDAO = new MonhocDAO();
    static int position=0;

    /**
     * Creates new form Frcstudentdem
     */
    public Frcstudentdem() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        txtmamon = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        txttenmon = new javax.swing.JTextField();
        btnthemmoi = new javax.swing.JButton();
        btnluu = new javax.swing.JButton();
        jLabel4 = new javax.swing.JLabel();
        txttimkiem = new javax.swing.JTextField();
        btnxoa = new javax.swing.JButton();
        btntim = new javax.swing.JButton();
        btnexit = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        tbmonhoc = new javax.swing.JTable();
        txtstatus = new javax.swing.JLabel();
        btn4 = new javax.swing.JButton();
        btn3 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        btn2 = new javax.swing.JButton();
        jButton5 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(null);

        jLabel1.setFont(new java.awt.Font("Tahoma", 0, 24)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(255, 102, 102));
        jLabel1.setText("MON HOC");
        getContentPane().add(jLabel1);
        jLabel1.setBounds(264, 11, 127, 51);

        jLabel2.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel2.setText("MA MON:");
        getContentPane().add(jLabel2);
        jLabel2.setBounds(70, 90, 90, 43);
        getContentPane().add(txtmamon);
        txtmamon.setBounds(193, 80, 280, 43);

        jLabel3.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel3.setText("TEN MON:");
        getContentPane().add(jLabel3);
        jLabel3.setBounds(70, 150, 90, 43);
        getContentPane().add(txttenmon);
        txttenmon.setBounds(193, 147, 280, 40);

        btnthemmoi.setText("THEM MOI");
        btnthemmoi.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnthemmoiActionPerformed(evt);
            }
        });
        getContentPane().add(btnthemmoi);
        btnthemmoi.setBounds(490, 80, 100, 43);

        btnluu.setText("LƯU");
        btnluu.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnluuActionPerformed(evt);
            }
        });
        getContentPane().add(btnluu);
        btnluu.setBounds(490, 150, 100, 43);

        jLabel4.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel4.setText("TIM KIEM:");
        getContentPane().add(jLabel4);
        jLabel4.setBounds(70, 210, 90, 43);

        txttimkiem.addCaretListener(new javax.swing.event.CaretListener() {
            public void caretUpdate(javax.swing.event.CaretEvent evt) {
                txttimkiemCaretUpdate(evt);
            }
        });
        getContentPane().add(txttimkiem);
        txttimkiem.setBounds(190, 210, 200, 40);

        btnxoa.setText("XOA");
        getContentPane().add(btnxoa);
        btnxoa.setBounds(490, 210, 100, 43);

        btntim.setText("TÌM");
        getContentPane().add(btntim);
        btntim.setBounds(410, 210, 60, 40);

        btnexit.setText("EXIT");
        btnexit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnexitActionPerformed(evt);
            }
        });
        getContentPane().add(btnexit);
        btnexit.setBounds(550, 490, 55, 40);

        tbmonhoc.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Ma Mon", "Ten Mon"
            }
        ));
        tbmonhoc.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tbmonhocMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(tbmonhoc);

        getContentPane().add(jScrollPane1);
        jScrollPane1.setBounds(70, 280, 410, 200);

        txtstatus.setText("Status");
        getContentPane().add(txtstatus);
        txtstatus.setBounds(10, 520, 50, 20);

        btn4.setText(">|");
        btn4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn4ActionPerformed(evt);
            }
        });
        getContentPane().add(btn4);
        btn4.setBounds(360, 490, 50, 23);

        btn3.setText("<<");
        getContentPane().add(btn3);
        btn3.setBounds(280, 490, 50, 23);

        jButton3.setText("|<");
        getContentPane().add(jButton3);
        jButton3.setBounds(120, 490, 50, 23);

        btn2.setText(">>");
        getContentPane().add(btn2);
        btn2.setBounds(200, 490, 50, 23);

        jButton5.setText(">>");
        getContentPane().add(jButton5);
        jButton5.setBounds(200, 490, 50, 23);

        pack();
    }// </editor-fold>//GEN-END:initComponents
public void reset() {
        txtmamon.setText("");
        txttenmon.setText("");
        txttimkiem.setText("");
        btnluu.setText("LUU");
    }
    private void btnthemmoiActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnthemmoiActionPerformed
        // TODO add your handling code here:
        reset();
    }//GEN-LAST:event_btnthemmoiActionPerformed
    public int isValidate() {

        if (txtmamon.getText().isEmpty() || txttenmon.getText().isEmpty()) {
            return -1;
        }
        return 1;
    }

    public Monhoc setModel() {
        Monhoc m = new Monhoc();
        m.setMamon(txtmamon.getText().trim());
        m.setTenmon(txttenmon.getText().trim());
        if (isValidate() < 0) {
            JOptionPane.showMessageDialog(this, "thêm");

        } else {
            m.setMamon(txtmamon.getText().trim());
            m.setTenmon(txttenmon.getText().trim());

        }
        return m;
    }

    void loadTable() {
        try {
            DefaultTableModel tbModel
                    = (DefaultTableModel) tbmonhoc.getModel();
            tbModel.setRowCount(0);
            for (Monhoc m : mhDAO.getAllMonhoc()) {
                Object[] rowData = new Object[2];
                rowData[0] = m.getMamon();
                rowData[1] = m.getTenmon();
                tbModel.addRow(rowData);
            }

        } catch (Exception e) {
            System.out.println("lỗi loadData:" + e.toString());
            JOptionPane.showMessageDialog(this, "lỗi:" + e.toString(), " thông báo ", 3);

        }

    }

    private void btnluuActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnluuActionPerformed
        // TODO add your handling code here:
        Monhoc m = setModel();
        if (btnluu.getText().equalsIgnoreCase("luu")) {
            mhDAO.add(m);
        } else {
            mhDAO.edit(m);
        }

        loadTable();
        txtstatus.setText("Lưu thành công");
        txtstatus.setForeground(Color.blue);

        reset();


    }//GEN-LAST:event_btnluuActionPerformed

    private void btnexitActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnexitActionPerformed
        // TODO add your handling code here:
        System.exit(0);

    }//GEN-LAST:event_btnexitActionPerformed

    private void tbmonhocMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tbmonhocMouseClicked
        // TODO add your handling code here:
        System.out.println("click: " + tbmonhoc.rowAtPoint(evt.getPoint()));
        int rowIndex = tbmonhoc.rowAtPoint(evt.getPoint());
        txtmamon.setText(tbmonhoc.getValueAt(rowIndex, 0).toString());
        txttenmon.setText(tbmonhoc.getValueAt(rowIndex, 1).toString());
        btnluu.setText("edit");
        txtmamon.setEditable(false);
    }//GEN-LAST:event_tbmonhocMouseClicked
    void fillDataFind(String find) {
        try {
            DefaultTableModel tbModel
                    = (DefaultTableModel) tbmonhoc.getModel();
            tbModel.setRowCount(0);
            for (Monhoc m : mhDAO.getFind(find)) {
                Object[] rowData = new Object[2];
                rowData[0] = m.getMamon();
                rowData[1] = m.getTenmon();
                tbModel.addRow(rowData);
            }

        } catch (Exception e) {
            System.out.println("lỗi loadData:" + e.toString());
            JOptionPane.showMessageDialog(this, "lỗi:" + e.toString(), " thông báo ", 3);

        }


    }
    private void txttimkiemCaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_txttimkiemCaretUpdate
        // TODO add your handling code here:
    String find= txttimkiem.getText().trim();

    }//GEN-LAST:event_txttimkiemCaretUpdate

    private void btn4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn4ActionPerformed
        // TODO add your handling code here:
        position++;
        if (position >= mhDAO.count() -1) {
            position = mhDAO.count() -1;
        }
//        setForm(position);
    }//GEN-LAST:event_btn4ActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Frcstudentdem.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Frcstudentdem.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Frcstudentdem.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Frcstudentdem.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Frcstudentdem().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btn2;
    private javax.swing.JButton btn3;
    private javax.swing.JButton btn4;
    private javax.swing.JButton btnexit;
    private javax.swing.JButton btnluu;
    private javax.swing.JButton btnthemmoi;
    private javax.swing.JButton btntim;
    private javax.swing.JButton btnxoa;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton5;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable tbmonhoc;
    private javax.swing.JTextField txtmamon;
    private javax.swing.JLabel txtstatus;
    private javax.swing.JTextField txttenmon;
    private javax.swing.JTextField txttimkiem;
    // End of variables declaration//GEN-END:variables
}
